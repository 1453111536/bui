/**
 * @fileOverview \u8fdb\u5ea6\u6761\u547d\u540d\u7a7a\u95f4\u5165\u53e3
 * @ignore
 */define("bui/progressbar",function(require){var e=require("bui/common"),t=e.namespace("ProgressBar");return e.mix(t,{Base:require("bui/progressbar/base"),Load:require("bui/progressbar/load")}),t}),define("bui/progressbar/base",function(require){var e=require("bui/common"),t=e.Component.View.extend({_uiSetPercent:function(t){var n=this,r=n.get("el").children();e.isArray(t)||(t=[t]),e.each(r,function(e,n){$(e).width(t[n]+"%")})}},{ATTRS:{percent:{}}}),n=e.Component.Controller.extend({},{ATTRS:{percent:{view:!0,value:0},tpl:{value:'<div class="progress-bar-inner"></div>'},xview:{value:t}}},{xclass:"progress-bar"});return n}),define("bui/progressbar/load",function(require){var e=require("bui/progressbar/base"),t=0,n=1,r=2,i=e.extend({bindUI:function(){var e=this;e.on("afterPercentChange",function(t){if(e.isLoading()){var n=e.get("percent");n==100&&e.onCompleted(),e.onChange()}})},start:function(){var e=this;e.isLoading()||e.onstart()},complete:function(){var e=this;clearTimeout(e.get("t")),e.set("percent",100)},cancle:function(){var e=this;clearTimeout(e.get("t")),e.get("percent")&&e.set("percent",0),e.set("status",t)},onstart:function(){var e=this,t=e.get("cfg");e.set("percent",0),e.set("status",n),e.fire("start",t),e._startLoad()},onChange:function(){var e=this;e.fire("loadchange")},onCompleted:function(){var e=this;e.set("status",r),e.fire("completed")},isLoading:function(){return this.get("status")===n},isCompleted:function(){return this.get("status")===r},_startLoad:function(){var e=this,t=e.get("ajaxCfg"),n=e.get("interval"),r;t.success=function(i){var s=i.percent;e.set("percent",s),s<100&&e.isLoading()&&(r=setTimeout(function(){$.ajax(t)},n),e.set("t",r))},$.ajax(t)}},{ATTRS:{status:{value:0},ajaxCfg:{},interval:{value:500},events:{value:["start","loadchange","completed"]}}},{xclass:"progress-bar-load"});return i});
