define("bui/slider",["bui/slider/slider"],function(e){var t=BUI.namespace("Slider");return BUI.mixin(t,{Slider:e("bui/slider/slider")}),t}),define("bui/slider/slider",["bui/common"],function(e){function a(e,t){return e>t&&(e=t),e<0&&(e=0),e/t*100}var t=e("bui/common"),n="x-slider-handle",r="x-slider-vertical",i="x-slider-horizontal",s="x-slider-back",o=n+"-start",u=n+"-end",f=t.Component.View.extend({renderUI:function(){var e=this,t=e.get("isVertical");t?e.get("el").addClass(r):e.get("el").addClass(i)},setRange:function(e,t,n){function d(e){return e+"%"}e>t&&(e=t);var r=this,i=r.get("backEl"),s=r.get("isVertical"),o=r.get("handleEl"),u=o.length,a=t-e,f=s?"height":"width",l=s?"bottom":"left",c=n?"animate":"css",h={},p={};i&&(h[f]=a+"%",h[l]=e+"%",i[c](h)),u==1?(p[l]=d(t),o[c](p)):u==2&&(p[l]=d(e),$(o[0])[c](p),p[l]=d(t),$(o[1])[c](p))},_uiSetBackTpl:function(e){var t=this,n=t.get("el"),r=$(e).appendTo(n);r.addClass(s),t.setInternal("backEl",r)},_uiSetHandleTpl:function(e){var t=this,r=t.get("el"),i=t.get("range"),s;i?(t._createHandleEl(e,o),t._createHandleEl(e,u)):t._createHandleEl(e),s=r.find("."+n),t.setInternal("handleEl",s)},_createHandleEl:function(e,t){var r=this,i=r.get("el"),s=$(e).appendTo(i);s.addClass(n),t&&s.addClass(t)}},{ATTRS:{backEl:{},handleEl:{}}}),l=t.Component.Controller.extend({slideTo:function(e){this.set("value",value)},bindUI:function(){var e=this,t=e.get("el");t.find(".x-slider-handle").on("click",function(e){e.preventDefault()}),t.on("mousedown",function(n){var r=$(n.target),i=t.offset(),s;r.hasClass("x-slider-handle")?(n.preventDefault(),e._handleDrag(n)):(i={left:n.pageX-i.left,top:n.pageY-i.top},e._slideByOffset(i,!0))})},_slideByOffset:function(e,n){var r=this,i=r.get("value"),s=r._formatValue(e);if(i==s||t.isArray(s)&&t.Array.equals(s,i))return;n?r.set("value",s):(r.setInternal("value",s),r._setValue(s,!1))},_handleDrag:function(e){function s(e){var n=t.get("draging");if(n){e.preventDefault();var r=e.pageX,i=e.pageY,s={};s.left=n.elX+(r-n.startX),s.top=n.elY+(i-n.startY),t._slideByOffset(s,!1)}}function o(e){e.which==1&&(t.set("draging",!1),a())}function u(){$(document).on("mousemove",s),$(document).on("mouseup",o)}function a(){$(document).off("mousemove",s),$(document).off("mouseup",o)}var t=this,n=t.get("isVertical"),r=$(e.target),i=r.position();e.which==1&&(t.set("draging",{elX:i.left,elY:n?i.top+r.height():i.top,startX:e.pageX,startY:e.pageY}),u())},_getCalcValue:function(e){var t=this,n=t.get("el"),r=t.get("max"),i=t.get("min"),s=t.get("step"),o=t.get("isVertical"),u=o?n.height():n.width(),f,l;o?f=a(n.height()-e.top,u):f=a(e.left,u),l=(r-i)*f/100+i;if(s){l=parseInt(l,10);var c=l%s;c&&(l+=s-c)}return l},_formatValue:function(e){var n=this,r=n.get("el"),i=n.get("value"),s=n._getCalcValue(e);if(t.isNumber(i))return s;if(t.isArray(i)){var o=Math.abs(i[0]-s),u=Math.abs(i[1]-s);return o<u?[s,i[1]]:[i[0],s]}return i},_uiSetValue:function(e){this._setValue(e,!0)},_setValue:function(e,n){var r=this,i=r.get("min"),s=r.get("max"),o=s-i,u,f;t.isNumber(e)?(u=0,f=a(e-i,o)):t.isArray(e)&&(u=a(e[0]-i,o),f=a(e[1]-i,o)),r._setRange(u,f,n),r.fire("change",{value:e})},_setRange:function(e,t,n){this.get("view").setRange(e,t,n)}},{ATTRS:{min:{value:0},max:{value:100},value:{view:!0},step:{value:1},handleTpl:{view:!0,value:'<a href="#"></a>'},isVertical:{view:!0,value:!1},range:{view:!0,value:!1},backTpl:{view:!0,value:"<div></div>"},xview:{value:f}}},{xclass:"slider"});return l});
