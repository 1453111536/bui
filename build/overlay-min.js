/**
 * @fileOverview Overlay \u6a21\u5757\u7684\u5165\u53e3
 * @ignore
 */define("bui/overlay",function(require){var e=require("bui/common"),t=e.namespace("Overlay");return e.mix(t,{Overlay:require("bui/overlay/overlay"),Dialog:require("bui/overlay/dialog"),Message:require("bui/overlay/message"),Picker:require("bui/overlay/picker")}),e.mix(t,{OverlayView:t.Overlay.View,DialogView:t.Dialog.View}),e.Message=e.Overlay.Message,t}),define("bui/overlay/overlay",function(require){var e=require("bui/common"),t=e.Component,n="x-align-arrow",r=t.UIBase,i=t.View.extend([r.PositionView,r.CloseView]),s=t.Controller.extend([r.Position,r.Align,r.Close,r.AutoShow,r.AutoHide],{renderUI:function(){var e=this,t=e.get("el"),n=e.get("arrowContainer"),r=n?t.one(n):t;e.get("showArrow")&&$(e.get("arrowTpl")).appendTo(r)},show:function(){function u(){e.set("visible",!0),t.callback&&t.callback.call(e)}var e=this,t=e.get("effect"),n=e.get("el"),r=e.get("visibleMode"),i=t.effect,o=t.duration;if(r==="visibility"){s.superclass.show.call(e),t.callback&&t.callback.call(e);return}e.get("rendered")||(e.set("visible",!0),e.render(),e.set("visible",!1),n=e.get("el"));switch(i){case"linear":n.show(o,u);break;case"fade":n.fadeIn(o,u);break;case"slide":n.slideDown(o,u);break;default:u()}},hide:function(){function s(){e.set("visible",!1),t.callback&&t.callback.call(e)}var e=this,t=e.get("effect"),n=e.get("el"),r=t.effect,i=t.duration;if(e.get("visibleMode")==="visibility"){s();return}switch(r){case"linear":n.hide(i,s);break;case"fade":n.fadeOut(i,s);break;case"slide":n.slideUp(i,s);break;default:s()}}},{ATTRS:{effect:{value:{effect:"none",duration:0,callback:null}},closable:{value:!1},showArrow:{value:!1},arrowContainer:{view:!0},arrowTpl:{value:'<s class="'+n+'"><s class="'+n+'-inner"></s></s>'},visibleMode:{value:"visibility"},visible:{value:!1},xview:{value:i}}},{xclass:"overlay"});return s.View=i,s}),define("bui/overlay/picker",function(require){var e=require("bui/overlay/overlay"),t=e.extend({bindUI:function(){var e=this,t=e.get("innerControl"),n=e.get("hideEvent"),r=$(e.get("trigger"));r.on(e.get("triggerEvent"),function(t){if(e.get("autoSetValue")){var n=e.get("valueField")||e.get("textField")||this,r=$(n).val();e.setSelectedValue(r)}}),t.on(e.get("changeEvent"),function(t){var n=e.get("curTrigger"),r=e.get("textField")||n,i=e.get("valueField"),s=e.getSelectedValue(),o=!1;if(r){var u=e.getSelectedText(),a=$(r).val();u!=a&&($(r).val(u),o=!0)}if(i){var f=$(i).val();i!=f&&($(i).val(s),o=!0)}o&&e.fire("selectedchange",{value:s,curTrigger:n})}),n&&t.on(e.get("hideEvent"),function(){e.hide()})},setSelectedValue:function(e){},getSelectedValue:function(){},getSelectedText:function(){},_uiSetValueField:function(e){var t=this;e&&t.setSelectedValue($(e).val())},_getTextField:function(){var e=this;return e.get("textField")||e.get("curTrigger")}},{ATTRS:{innerControl:{getter:function(){return this.get("children")[0]}},triggerEvent:{value:"click"},autoSetValue:{value:!0},changeEvent:{value:"selectedchange"},autoHide:{value:!0},hideEvent:{value:"itemclick"},textField:{},align:{value:{points:["bl","tl"],offset:[0,0]}},valueField:{}}},{xclass:"picker"});return t}),define("bui/overlay/dialog",function(require){var e=require("bui/overlay/overlay"),t=BUI.Component.UIBase,n="header-title",r=BUI.prefix,i=20,s=e.View.extend([t.StdModView,t.MaskView],{_uiSetTitle:function(e){var t=this,r=t.get("el");r.find("."+n).html(e)},_uiSetContentId:function(e){var t=this,n=t.get("body"),r=$("#"+e).children();r.appendTo(n)},_uiSetHeight:function(e){var t=this,n=e,r=t.get("header"),s=t.get("body"),o=t.get("footer");n-=r.outerHeight()+o.outerHeight(),n-=i*2,s.height(n)},_removeContent:function(){var e=this,t=e.get("body"),n=e.get("contentId");n?t.children().appendTo($("#"+n)):t.children().remove()}},{xclass:"dialog-view"}),o=e.extend([t.StdMod,t.Mask,t.Drag],{show:function(){var e=this;o.superclass.show.call(this),e.center()},_uiSetButtons:function(e){var t=this,n=t.get("footer");n.children().remove(),BUI.each(e,function(e){t._createButton(e,n)})},_createButton:function(e,t){var n=this,r='<button class="'+e.elCls+'">'+e.text+"</button>",i=$(r).appendTo(t);i.on("click",function(){e.handler.call(n)})}},{ATTRS:{closeTpl:{view:!0,value:'<a tabindex="0" href=javascript:void("\u5173\u95ed") role="button" class="'+r+'ext-close" style=""><span class="'+r+'ext-close-x x-icon x-icon-normal">\u00d7</span></a>'},buttons:{value:[{text:"\u786e\u5b9a",elCls:"button button-primary",handler:function(){var e=this,t=e.get("success");t&&t.call(e)}},{text:"\u53d6\u6d88",elCls:"button button-primary",handler:function(){this.hide()}}]},contentId:{view:!0},success:{value:function(){}},dragNode:{valueFn:function(){return this.get("header")}},title:{view:!0,value:""},mask:{value:!0},maskShared:{value:!1},headerContent:{value:'<div class="'+n+'">\u6807\u9898</div>'},footerContent:{},closable:{value:!0},xview:{value:s}}},{xclass:"dialog"});return o.View=s,o}),define("bui/overlay/message",function(require){function s(e,t){return function(n,r,i){BUI.isString(r)&&(i=r,r=null),i=i||t,r=r||a,o({buttons:e,icon:i,msg:n,success:r})}}function o(e){i.set(e),i.show()}function u(){var e=this,t=e.get("success");t&&(t.call(e),e.hide())}function a(){this.hide()}var e=require("bui/overlay/dialog"),t=BUI.prefix,n={info:"i",error:"\u00d7",success:'<i class="icon-ok icon-white"></i>',question:"?",warning:"!"},r=e.extend({renderUI:function(){this._setContent()},bindUI:function(){var e=this,t=e.get("body");e.on("afterVisibleChange",function(n){n.newVal&&BUI.UA.ie<8&&(e.get("header").width(t.outerWidth()-20),e.get("footer").width(t.outerWidth()))})},_setContent:function(){var e=this,t=e.get("body"),n=BUI.substitute(e.get("contentTpl"),{msg:e.get("msg"),iconTpl:e.get("iconTpl")});t.empty(),$(n).appendTo(t)},_uiSetIcon:function(e){if(!this.get("rendered"))return;this._setContent()},_uiSetMsg:function(e){if(!this.get("rendered"))return;this._setContent()}},{ATTRS:{icon:{},msg:{},iconTpl:{getter:function(){var e=this,t=e.get("icon");return'<div class="x-icon x-icon-'+t+'">'+n[t]+"</div>"}},contentTpl:{value:'{iconTpl}<div class="'+t+'message-content">{msg}</div>'}}},{xclass:"message",priority:0}),i=new r({icon:"info",title:""}),f=s([{text:"\u786e\u5b9a",elCls:"button button-primary",handler:u}],"info"),l=s([{text:"\u786e\u5b9a",elCls:"button button-primary",handler:u},{text:"\u53d6\u6d88",elCls:"button button-primary",handler:a}],"question");return r.Alert=f,r.Confirm=l,r.Show=o,r});
